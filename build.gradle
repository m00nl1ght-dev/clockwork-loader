
plugins {
    id 'maven-publish'
}

evaluationDependsOnChildren()
version '0.1'

subprojects {

    version rootProject.version
    group 'dev.m00nl1ght.clockwork'

    repositories {
        mavenCentral()
    }

}

publishing {

    repositories {
        maven {
            if (project.hasProperty('devMavenPassword')) {
                url 'https://m00nl1ght.dev/maven/'
                credentials {
                    username devMavenUser
                    password devMavenPassword
                }
            } else {
                url 'file://' + rootProject.file('repo').getAbsolutePath()
            }
        }
    }

    publications {
        core(MavenPublication) {
            groupId = 'dev.m00nl1ght.clockwork'
            artifactId = 'core'
            version = rootProject.version
            from project('core').components.java
        }

        testEnv(MavenPublication) {
            groupId = 'dev.m00nl1ght.clockwork'
            artifactId = 'test-env'
            version = rootProject.version
            from project('test-env').components.java
        }

        testPlugin(MavenPublication) {
            groupId = 'dev.m00nl1ght.clockwork'
            artifactId = 'test-plugin'
            version = rootProject.version
            from project('test-plugin').components.java
        }
    }
}
